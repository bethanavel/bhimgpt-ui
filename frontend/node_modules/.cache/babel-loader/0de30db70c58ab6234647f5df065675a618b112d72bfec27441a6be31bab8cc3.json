{"ast":null,"code":"var _jsxFileName = \"/Users/bethanavel/Documents/Personal/bhimGPT/anand_ui2/bhimgpt-ui/frontend/src/components/Chat/chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Container, Sidebar, ChatBox, MessagesContainer, Message, InputContainer, Input, SendButton, SidebarItem, NewChatButton } from './chat.styles';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const [chats, setChats] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [user, setUser] = useState(null);\n  const [selectedChatId, setSelectedChatId] = useState(null);\n  const [loading, setLoading] = useState(false); // Loader state\n  const navigate = useNavigate();\n\n  // Fetch AI Response\n  const fetchChatResponse = async (question, chatHistory) => {\n    try {\n      setLoading(true);\n      // Format chat history to match Flask server expectations\n      const formattedHistory = chatHistory.map(msg => ({\n        type: msg.role,\n        // 'human' or 'ai'\n        content: msg.content\n      }));\n      // Call Flask server using axios\n      const response = await axios.post(\"http://localhost:5001/chat\", {\n        question,\n        chat_history: formattedHistory\n      });\n\n      // const response = await fetch(\"http://localhost:5000/api/chat/chatResponse\", {\n      //   method: \"POST\",\n      //   headers: { \"Content-Type\": \"application/json\" },\n      //   body: JSON.stringify({ question, chat_history: chatHistory })\n      // });\n      // const data = await response.json();\n      setLoading(false);\n      //   return data;\n      // } catch (error) {\n      //   console.error(\"Error fetching response:\", error);\n      //   setLoading(false);\n      //   return { error: \"Server error\" };\n      // }\n      const {\n        answer,\n        sources\n      } = response.data;\n      if (answer) {\n        return {\n          answer,\n          sources: sources || []\n        };\n      } else {\n        console.error(\"Unexpected response format:\", response.data);\n        return {\n          error: \"Unexpected response format\"\n        };\n      }\n    } catch (error) {\n      console.error(\"Error fetching response:\", error);\n      setLoading(false);\n      return {\n        error: error.message || \"Server error\"\n      };\n    }\n  };\n\n  // Save Chat Message\n  const saveMessage = async (userMessage, aiMessage, sources) => {\n    try {\n      await axios.post(\"http://localhost:5000/api/chat/save\", {\n        userId: user._id,\n        chatId: selectedChatId,\n        message: userMessage,\n        aiResponse: aiMessage\n      });\n    } catch (error) {\n      console.error(\"Error saving message:\", error);\n    }\n  };\n  const fetchChats = async () => {\n    if (!user) return;\n    try {\n      const res = await axios.get(`http://localhost:5000/api/chat/${user._id}`);\n      setChats(res.data);\n    } catch (error) {\n      console.error(\"Error fetching chats:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchChats();\n  }, [user]);\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (!storedUser) {\n      navigate(\"/login\");\n      return;\n    }\n    setUser(JSON.parse(storedUser));\n  }, []);\n  const loadChat = async chatId => {\n    setSelectedChatId(chatId);\n    const res = await axios.get(`http://localhost:5000/api/chat/${user._id}/${chatId}`);\n    setMessages(res.data);\n  };\n\n  // Handle Send Message Flow\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage = {\n      role: \"human\",\n      content: input\n    };\n    setMessages(prevMessages => [...prevMessages, userMessage]);\n    setInput(\"\");\n\n    // If this is a new chat, we need to create it first\n    if (!selectedChatId) {\n      try {\n        const saveResponse = await axios.post(\"http://localhost:5000/api/chat/save\", {\n          userId: user._id,\n          message: input,\n          aiResponse: \"\" // Initial empty response to create the chat\n        });\n        setSelectedChatId(saveResponse.data.chatId); // Set the new chat ID\n        fetchChats(); // Only fetch chats when creating a new conversation\n      } catch (error) {\n        console.error(\"Error creating new chat:\", error);\n        return;\n      }\n    }\n\n    // Fetch AI Response\n    const response = await fetchChatResponse(input, messages);\n    if (response.error) return;\n    const aiMessage = {\n      role: \"ai\",\n      content: response.answer,\n      sources: response.sources\n    };\n    setMessages(prevMessages => [...prevMessages, aiMessage]);\n    await saveMessage(userMessage.content, aiMessage.content, aiMessage.sources);\n  };\n  const startNewChat = () => {\n    setSelectedChatId(null);\n    setMessages([]);\n  };\n  const groupedChats = {\n    Today: [],\n    \"Last 7 Days\": [],\n    \"Last 30 Days\": [],\n    Older: []\n  };\n  chats.forEach(chat => {\n    const daysAgo = (Date.now() - new Date(chat.createdAt)) / (1000 * 60 * 60 * 24);\n    if (daysAgo < 1) groupedChats.Today.push(chat);else if (daysAgo < 7) groupedChats[\"Last 7 Days\"].push(chat);else if (daysAgo < 30) groupedChats[\"Last 30 Days\"].push(chat);else groupedChats.Older.push(chat);\n  });\n  return user ? /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      children: [/*#__PURE__*/_jsxDEV(NewChatButton, {\n        onClick: startNewChat,\n        children: \"+ New Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), Object.entries(groupedChats).map(([label, chats]) => chats.length > 0 && chats.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)) && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }, this), chats.map(chat => /*#__PURE__*/_jsxDEV(SidebarItem, {\n          onClick: () => loadChat(chat._id),\n          children: chat.title\n        }, chat._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }, this))]\n      }, label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n      children: [/*#__PURE__*/_jsxDEV(MessagesContainer, {\n        children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n          isbot: msg.role === \"ai\" ? \"true\" : \"false\",\n          children: msg.content\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this)), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24,\n          style: {\n            margin: \"10px auto\",\n            display: \"block\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          className: \"chat-box\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Type a message...\",\n          disabled: loading // Disable input while loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n          onClick: handleSendMessage,\n          disabled: loading,\n          children: loading ? \"Loading...\" : \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 7\n  }, this);\n};\n_s(Chat, \"t3f39ytwDNhNv/l4jT2v2i1uRoE=\", false, function () {\n  return [useNavigate];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Container","Sidebar","ChatBox","MessagesContainer","Message","InputContainer","Input","SendButton","SidebarItem","NewChatButton","CircularProgress","jsxDEV","_jsxDEV","Chat","_s","chats","setChats","messages","setMessages","input","setInput","user","setUser","selectedChatId","setSelectedChatId","loading","setLoading","navigate","fetchChatResponse","question","chatHistory","formattedHistory","map","msg","type","role","content","response","post","chat_history","answer","sources","data","console","error","message","saveMessage","userMessage","aiMessage","userId","_id","chatId","aiResponse","fetchChats","res","get","storedUser","localStorage","getItem","JSON","parse","loadChat","handleSendMessage","trim","prevMessages","saveResponse","startNewChat","groupedChats","Today","Older","forEach","chat","daysAgo","Date","now","createdAt","push","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","label","length","sort","a","b","title","index","isbot","size","style","margin","display","className","value","onChange","e","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["/Users/bethanavel/Documents/Personal/bhimGPT/anand_ui2/bhimgpt-ui/frontend/src/components/Chat/chat.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  Container, Sidebar, ChatBox, MessagesContainer,\n  Message, InputContainer, Input, SendButton, SidebarItem, NewChatButton\n} from './chat.styles';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst Chat = () => {\n  const [chats, setChats] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [user, setUser] = useState(null);\n  const [selectedChatId, setSelectedChatId] = useState(null);\n  const [loading, setLoading] = useState(false); // Loader state\n  const navigate = useNavigate();\n\n  // Fetch AI Response\n  const fetchChatResponse = async (question, chatHistory) => {\n    try {\n      setLoading(true);\n      // Format chat history to match Flask server expectations\n      const formattedHistory = chatHistory.map(msg => ({\n        type: msg.role,  // 'human' or 'ai'\n        content: msg.content\n      }));\n      // Call Flask server using axios\n      const response = await axios.post(\"http://localhost:5001/chat\", {\n        question,\n        chat_history: formattedHistory\n      });\n\n      // const response = await fetch(\"http://localhost:5000/api/chat/chatResponse\", {\n      //   method: \"POST\",\n      //   headers: { \"Content-Type\": \"application/json\" },\n      //   body: JSON.stringify({ question, chat_history: chatHistory })\n      // });\n      // const data = await response.json();\n      setLoading(false);\n    //   return data;\n    // } catch (error) {\n    //   console.error(\"Error fetching response:\", error);\n    //   setLoading(false);\n    //   return { error: \"Server error\" };\n    // }\n    const { answer, sources } = response.data;\n      if (answer) {\n        return { answer, sources: sources || [] };\n      } else {\n        console.error(\"Unexpected response format:\", response.data);\n        return { error: \"Unexpected response format\" };\n      }\n    } catch (error) {\n      console.error(\"Error fetching response:\", error);\n      setLoading(false);\n      return { error: error.message || \"Server error\" };\n    }\n  };\n\n  // Save Chat Message\n  const saveMessage = async (userMessage, aiMessage, sources) => {\n    try {\n      await axios.post(\"http://localhost:5000/api/chat/save\", {\n        userId: user._id,\n        chatId: selectedChatId,\n        message: userMessage,\n        aiResponse: aiMessage,\n      });\n    } catch (error) {\n      console.error(\"Error saving message:\", error);\n    }\n  };\n\n  const fetchChats = async () => {\n    if (!user) return;\n    try {\n      const res = await axios.get(`http://localhost:5000/api/chat/${user._id}`);\n      setChats(res.data);\n    } catch (error) {\n      console.error(\"Error fetching chats:\", error);\n    }\n  };\n  \n  useEffect(() => {\n    fetchChats();\n  }, [user]);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (!storedUser) {\n      navigate(\"/login\");\n      return;\n    }\n    setUser(JSON.parse(storedUser));\n  }, []);\n\n  const loadChat = async (chatId) => {\n    setSelectedChatId(chatId);\n    const res = await axios.get(`http://localhost:5000/api/chat/${user._id}/${chatId}`);\n    setMessages(res.data);\n  };\n\n  // Handle Send Message Flow\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { role: \"human\", content: input };\n    setMessages(prevMessages => [...prevMessages, userMessage]);\n    setInput(\"\");\n\n    // If this is a new chat, we need to create it first\n    if (!selectedChatId) {\n      try {\n        const saveResponse = await axios.post(\"http://localhost:5000/api/chat/save\", {\n          userId: user._id,\n          message: input,\n          aiResponse: \"\" // Initial empty response to create the chat\n        });\n        setSelectedChatId(saveResponse.data.chatId); // Set the new chat ID\n        fetchChats(); // Only fetch chats when creating a new conversation\n      } catch (error) {\n        console.error(\"Error creating new chat:\", error);\n        return;\n      }\n    }\n\n    // Fetch AI Response\n    const response = await fetchChatResponse(input, messages);\n    if (response.error) return;\n\n    const aiMessage = { \n      role: \"ai\", \n      content: response.answer,\n      sources: response.sources\n    };\n    setMessages(prevMessages => [...prevMessages, aiMessage]);\n\n    await saveMessage(userMessage.content, aiMessage.content, aiMessage.sources);\n  };\n\n  const startNewChat = () => {\n    setSelectedChatId(null);\n    setMessages([]);\n  };\n\n  const groupedChats = {\n    Today: [],\n    \"Last 7 Days\": [],\n    \"Last 30 Days\": [],\n    Older: [],\n  };\n\n  chats.forEach((chat) => {\n    const daysAgo = (Date.now() - new Date(chat.createdAt)) / (1000 * 60 * 60 * 24);\n    if (daysAgo < 1) groupedChats.Today.push(chat);\n    else if (daysAgo < 7) groupedChats[\"Last 7 Days\"].push(chat);\n    else if (daysAgo < 30) groupedChats[\"Last 30 Days\"].push(chat);\n    else groupedChats.Older.push(chat);\n  });\n\n  return user ? (\n    <Container>\n      <Sidebar>\n        <NewChatButton onClick={startNewChat}>+ New Chat</NewChatButton>\n        {Object.entries(groupedChats).map(([label, chats]) =>\n          chats.length > 0 && chats.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)) && (\n            <div key={label}>\n              <h4>{label}</h4>\n              {chats.map((chat) => (\n                <SidebarItem key={chat._id} onClick={() => loadChat(chat._id)}>\n                  {chat.title}\n                </SidebarItem>\n              ))}\n            </div>\n          )\n        )}\n      </Sidebar>\n\n      <ChatBox>\n        <MessagesContainer>\n          {messages.map((msg, index) => (\n            <Message key={index} isbot={msg.role === \"ai\" ? \"true\" : \"false\"}>{msg.content}</Message>\n          ))}\n          {loading && <CircularProgress size={24} style={{ margin: \"10px auto\", display: \"block\" }} />}\n        </MessagesContainer>\n\n        <InputContainer>\n          <Input\n            type=\"text\"\n            className=\"chat-box\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type a message...\"\n            disabled={loading} // Disable input while loading\n          />\n          <SendButton onClick={handleSendMessage} disabled={loading}>\n            {loading ? \"Loading...\" : \"Send\"}\n          </SendButton>\n        </InputContainer>\n      </ChatBox>\n    </Container>\n  ) : <p>Loading...</p>;\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}